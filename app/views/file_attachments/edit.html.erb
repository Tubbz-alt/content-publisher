<% content_for :title, t("file_attachments.edit.#{params[:wizard]}.title", title: @edition.title_or_fallback) %>
<% content_for :back_link, render_back_link(href: featured_attachments_path(@edition.document),
                                            data_attributes: { "modal-action": "back" }) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_tag(
      edit_file_attachment_path(@edition.document, @attachment.file_attachment_id),
      method: :patch,
      multipart: true,
      data: {
        "modal-action": "update",
        gtm: "edit-details"
      },
    ) do %>
      <%= hidden_field_tag(:wizard, params[:wizard]) %>

      <%= render_govspeak(t("file_attachments.edit.description_govspeak")) %>

      <%= render "govuk_publishing_components/components/input", {
        label: {
          text: t("file_attachments.edit.unique_reference.heading"),
          bold: true
        },
        name: "file_attachment[unique_reference]",
        value: params.dig(:file_attachment, :unique_reference) || @attachment.unique_reference,
        hint: t("file_attachments.edit.unique_reference.hint_text"),
      } %>

      <%= render "govuk_publishing_components/components/button", {
        margin_bottom: true,
        text: "Save",
      } %>

      <div class="govuk-body">
        <%= link_to "Cancel",
                  featured_attachments_path(@edition.document),
                  class: "govuk-link govuk-link--no-visited-state" %>
      </div>
    <% end %>
  </div>
</div>
