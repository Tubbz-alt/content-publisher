<% publish_datetime = @edition.revision.scheduled_publishing_datetime %>
<% default_date = Time.zone.now.tomorrow %>

<%= form_tag(save_scheduled_publishing_datetime_path(@edition.document)) do %>
  <%= render "govuk_publishing_components/components/details", {
    title: if publish_datetime
             simple_format("Publish date: \n" + publish_datetime.strftime("%-d %B %Y - %l:%M%P"))
           else
             "Schedule publishing"
           end
  } do %>
    <%= render "govuk_publishing_components/components/input", {
      label: { text: "Day" },
      name: "scheduled[day]",
      maxlength: 2,
      value: publish_datetime&.day,
    } %>
    <%= render "govuk_publishing_components/components/input", {
      label: { text: "Month" },
      name: "scheduled[month]",
      maxlength: 2,
      value: publish_datetime&.month,
    } %>
    <%= render "govuk_publishing_components/components/input", {
      label: { text: "Year" },
      name: "scheduled[year]",
      maxlength: 4,
      value: publish_datetime&.year,
    } %>
    <%= render "govuk_publishing_components/components/select", {
      label: "Time",
      id: "scheduled[time]",
      options: time_options(publish_datetime&.strftime("%l:%M%P")&.strip),
    } %>
    <%= render "govuk_publishing_components/components/button", {
      text: "Save", margin_bottom: true
    } %>
  <% end %>
<% end %>
