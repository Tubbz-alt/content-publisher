<% if @edition.withdrawn? %>
  <% metadata = [
      field: t("documents.show.metadata.withdrawn_by"),
      value: @edition.status.created_by&.name || I18n.t!("documents.show.metadata.unknown_user")
  ] %>
<% else %>
  <% metadata = [
    {
      field: t("documents.show.metadata.created_at"),
      value: @document.created_at.strftime("%l:%M%P on %d %B %Y")
    },
    {
      field: t("documents.show.metadata.created_by"),
      value: @document.created_by&.name || I18n.t!("documents.show.metadata.unknown_user")
    },
    {
      field: t("documents.show.metadata.last_edited_by"),
      value: @edition.last_edited_by&.name || I18n.t!("documents.show.metadata.unknown_user")
    }
  ] %>
<% end %>

<div class="app-side">
  <%= render "components/metadata", {
    data_attributes: {
      "gtm-document-type": @edition.document_type.label,
      "gtm-document-status": t("user_facing_states.#{@edition.state}.name")
    },
    items: [
      {
        field: t("documents.show.metadata.status"),
        value: t("user_facing_states.#{@edition.state}.name")
      },
      {
        field: t("documents.show.metadata.updated_at"),
        value: @edition.last_edited_at.strftime("%l:%M%P on %d %B %Y")
      },
    ] + metadata
  } %>
</div>
