<% backdating_status = capture do %>
  <% if @edition.backdated_to.present? %>
    <% format_date(@edition.backdated_to) %>
  <% else %>
    <% t("documents.show.content_settings.backdate.no_backdate") %>
  <% end %>
<% end %>

<% access_limit = capture do %>
  <% if @edition.access_limit.present? %>
    <% t("documents.show.content_settings.access_limit.type.#{@edition.access_limit.limit_type}") %>
  <% else %>
    <% t("documents.show.content_settings.access_limit.no_access_limit") %>
  <% end %>
<% end %>

<% items = [] %>

<% if @edition.editable? %>
  <% items <<
  {
    field: t("documents.show.content_settings.access_limit.title"),
    value: access_limit,
    edit: {
      href: access_limit_path(@edition.document),
      data_attributes: { gtm: "edit-access-limit" }
    }
  } %>
<% end %>

<% if @edition.first? && @edition.editable? %>
  <% items << {
    field: t("documents.show.content_settings.backdate.title"),
    value: backdating_status,
    edit: {
      href: backdate_path(@edition.document),
      data_attributes: { gtm: "edit-backdate" }
    }
  } %>
<% end %>

<% items << {
  field: t("documents.show.content_settings.gets_history_mode.title"),
  value: @edition.political? ? t("documents.show.content_settings.gets_history_mode.true_label") : t("documents.show.content_settings.gets_history_mode.false_label"),
  edit: @edition.editable? ? { href: history_mode_path(@edition.document), data_attributes: { gtm: "edit-history-mode" } } : {}
} %>

<%= render "govuk_publishing_components/components/summary_list", {
  id: "content_settings",
  title: t("documents.show.content_settings.title"),
  borderless: true,
  items: items
} %>
