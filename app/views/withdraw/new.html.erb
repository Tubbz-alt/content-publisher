<% content_for :back_link, render_back_link(href: document_path(@edition.document)) %>
<% content_for :title, t("withdraw.new.title", title: @edition.title) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= render_govspeak(t("withdraw.new.intro_paragraph")) %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_tag withdraw_path(@edition.document), data: { gtm: "confirm-withdraw" } do %>
      <%= render "govuk_publishing_components/components/textarea", {
        label: {
          text: t("withdraw.new.public_explanation.title"),
          bold: true
        },
        id: "withdrawal_public_explanation",
        value: @public_explanation,
        error_items: @issues&.items_for(:public_explanation),
        name: "public_explanation",
        rows: 6,
        data: {
          "contextual_guidance": "withdrawal-public-explanation-guidance",
        }
      } %>

      <% if @edition.withdrawn? %>
        <%= render "govuk_publishing_components/components/button", {
          text: "Update explanation", margin_bottom: true
        } %>
      <% else %>
        <%= render "govuk_publishing_components/components/button", {
          text: "Withdraw document", margin_bottom: true
        } %>
      <% end %>

      <p class="govuk-body">
        <%= link_to "Cancel", document_path(@edition.document),
                    class: "govuk-link govuk-link--no-visited-state",
                    data: { gtm: "cancel-withdraw" } %>
      </p>
    <% end %>
  </div>
  <div class="govuk-grid-column-one-third">
    <%= render "components/contextual_guidance", {
      id: "withdrawal-public-explanation-guidance",
      title: t("withdraw.new.public_explanation.guidance_title"),
    } do %>
      <p>Explain to users why the page has been withdrawn. You can link to alternative content with markdown.</p>
      <pre class="app-c-markdown-guidance__code-snippet">
        [linktext](https://www.gov.uk/example)
      </pre>
    <% end %>
  </div>
</div>
