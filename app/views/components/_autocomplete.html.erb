<%
  id ||= "autocomplete-#{SecureRandom.hex(4)}"
  options ||= []
  selected_options ||= []
  multiple ||= nil
  type ||= nil
  size ||= nil
  hint ||= nil
  width ||= nil
  css_classes = %w(app-c-autocomplete govuk-form-group)
  css_classes << "app-c-autocomplete--#{width}" if width
%>

<%= tag.div class: css_classes, data: { module: "autocomplete", "autocomplete-type": type } do %>
  <%= render "govuk_publishing_components/components/label", {
    html_for: id
  }.merge(label.symbolize_keys) %>

  <% if options.any? %>
    <%= tag.span "To select multiple items in a list, hold down Ctrl (PC) or Command (Mac) key.", class: "govuk-hint app-c-autocomplete__multiselect-instructions" if multiple %>

    <%= tag.span hint, class: "govuk-hint" if hint %>

    <%= select_tag name,
      options_for_select(options, selected_options),
      id: id,
      class: "govuk-select",
      size: size,
      multiple: multiple
    %>
  <% else %>
    <%= tag.p "No options available", class: "govuk-hint" %>
  <% end %>
<% end %>
